<%- include("./partials/header") -%>
<div class="jumbotron my-jumbo">
    <h3>Delete an Author</h3>
</div>
<div class="container">
    <h1><%= title %>: <%= author.name %></h1>
    <% var author; var author_books; %>
    <p><%= author.lifespan %></p>

    <% if(author_books.length > 0){ %>
        <p class="alert alert-danger alert-dismissible">
            <a href="" class="alert-dismiss"></a>
            Delete the following books before attempting to delete this author
        </p>
        <div>
            <h4>Books</h4>
            <dl>
                <% author_books.forEach(book =>{ %>
                    <dt>
                        <a href="<%= book.url %>"><%= book.title %></a>
                    </dt>
                    <dd><%= book.summary %></dd>
                <% }) %>
            </dl>
        </div>
    <% }else{ %>
        <p>Do you really want to delete this Author?</p>
        <form action="" method="POST">
            <div class="form-group">
                <input name="authorid" required value="<%= author._id %>" type="hidden" id="authorid" class="form-control">
            </div>
            <button type="submit" class="btn btn-primary">Delete</button>
        </form>
    <% } %>
</div>